<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanguard File Download Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
        }

        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .file-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .file-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .file-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            word-break: break-word;
        }

        .file-info {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .file-size {
            display: inline-block;
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 5px;
            margin-right: 10px;
        }

        .file-path {
            display: block;
            margin-top: 10px;
            font-family: monospace;
            font-size: 12px;
            color: #999;
        }

        .download-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }

        .download-btn:hover {
            transform: scale(1.05);
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 18px;
        }

        .error {
            background: #ff4444;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .section-title {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .quick-download {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .quick-download h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .quick-download-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .quick-btn {
            background: #f0f0ff;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
        }

        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="status-indicator">
        <div class="status-dot"></div>
        <span>Server Connected</span>
    </div>

    <div class="container">
        <div class="header">
            <h1>üì• Vanguard File Download Portal</h1>
            <p class="subtitle">Download files from the server for upload to cloud storage</p>
        </div>

        <div class="quick-download">
            <h2>üöÄ Quick Downloads - Required Files for Deployment</h2>
            <div class="quick-download-grid">
                <a href="/download/fmcsa_complete.db" class="quick-btn" download>
                    üìä FMCSA Database (521MB)
                </a>
                <a href="/download/insurance_leads_api.py" class="quick-btn" download>
                    üêç Insurance Leads API
                </a>
                <a href="/download/api_main.py" class="quick-btn" download>
                    üöÄ Main API File
                </a>
            </div>
        </div>

        <div class="section-title">üìÅ All Available Files</div>
        <div class="file-grid" id="fileGrid">
            <div class="loading">Loading files...</div>
        </div>
    </div>

    <script>
        // File data - these are the important files
        const files = [
            {
                name: 'fmcsa_complete.db',
                path: '/home/corp06/fmcsa_complete.db',
                size: '521 MB',
                icon: 'üóÑÔ∏è',
                description: 'FMCSA Database with 2.2M carriers - REQUIRED FOR DEPLOYMENT'
            },
            {
                name: 'insurance_leads_api.py',
                path: '/home/corp06/vanguard-insurance-github/insurance_leads_api.py',
                size: '45 KB',
                icon: 'üêç',
                description: 'Insurance leads API module'
            },
            {
                name: 'api_main.py',
                path: '/home/corp06/vanguard-insurance-github/api_main.py',
                size: '8 KB',
                icon: 'üöÄ',
                description: 'Main API server file'
            },
            {
                name: 'requirements.txt',
                path: '/home/corp06/vanguard-insurance-github/requirements.txt',
                size: '1 KB',
                icon: 'üìã',
                description: 'Python dependencies'
            },
            {
                name: 'backend.zip',
                path: '/home/corp06/vanguard-insurance-github/backend.zip',
                size: 'Varies',
                icon: 'üì¶',
                description: 'Backend Node.js application (if needed)'
            }
        ];

        function createFileCard(file) {
            return `
                <div class="file-card">
                    <div class="file-icon">${file.icon}</div>
                    <div class="file-name">${file.name}</div>
                    <div class="file-info">
                        <span class="file-size">${file.size}</span>
                        <p style="margin-top: 10px; color: #666; font-size: 13px;">${file.description}</p>
                        <span class="file-path">Path: ${file.path}</span>
                    </div>
                    <button class="download-btn" onclick="downloadFile('${file.name}', '${file.path}')">
                        Download ${file.name}
                    </button>
                </div>
            `;
        }

        function downloadFile(fileName, filePath) {
            // For the database file, use the copy we made in home directory
            if (fileName === 'fmcsa_complete.db') {
                // Create a download link
                const a = document.createElement('a');
                a.href = `http://192.168.40.232:8897/download/database`;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);

                alert(`Downloading ${fileName}...\n\nOnce downloaded:\n1. Upload to Google Drive\n2. Make it public\n3. Get the share link\n4. Convert to direct download URL\n5. Add to Render environment variables`);
            } else {
                alert(`File: ${fileName}\n\nTo download this file:\n1. Use SCP or SFTP from your local machine\n2. Or create a temporary download endpoint\n\nPath: ${filePath}`);
            }
        }

        // Render file cards
        function renderFiles() {
            const grid = document.getElementById('fileGrid');
            grid.innerHTML = files.map(file => createFileCard(file)).join('');
        }

        // Check server status
        async function checkServerStatus() {
            try {
                const response = await fetch('http://192.168.40.232:8897/health');
                const statusDot = document.querySelector('.status-dot');
                if (response.ok) {
                    statusDot.style.background = '#28a745';
                } else {
                    statusDot.style.background = '#dc3545';
                }
            } catch (error) {
                document.querySelector('.status-dot').style.background = '#dc3545';
            }
        }

        // Initialize
        renderFiles();
        checkServerStatus();
        setInterval(checkServerStatus, 5000);

        // Add instructions
        setTimeout(() => {
            console.log('%cüì• Download Instructions:', 'font-size: 16px; font-weight: bold; color: #667eea;');
            console.log('%c1. Click "Download fmcsa_complete.db" button', 'font-size: 14px; color: #333;');
            console.log('%c2. Upload the 521MB file to Google Drive', 'font-size: 14px; color: #333;');
            console.log('%c3. Make it publicly accessible', 'font-size: 14px; color: #333;');
            console.log('%c4. Convert share link to direct download URL', 'font-size: 14px; color: #333;');
            console.log('%c5. Add URL to Render environment variables', 'font-size: 14px; color: #333;');
        }, 1000);
    </script>
</body>
</html>